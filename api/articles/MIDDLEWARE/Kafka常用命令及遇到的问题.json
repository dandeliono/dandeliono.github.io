{"title":"Kafka常用命令及遇到的问题","uid":"0bc98c01f2602afec20cfdc03ed2e502","slug":"MIDDLEWARE/Kafka常用命令及遇到的问题","date":"2024-12-07T16:14:25.000Z","updated":"2025-09-30T03:26:47.967Z","comments":true,"path":"api/articles/MIDDLEWARE/Kafka常用命令及遇到的问题.json","keywords":"XuGuangSheng","cover":"/covers/kafka.jpg","content":"<h1 id=\"Kafka常用命令及遇到的问题\"><a href=\"#Kafka常用命令及遇到的问题\" class=\"headerlink\" title=\"Kafka常用命令及遇到的问题\"></a>Kafka常用命令及遇到的问题</h1><p><a href=\"https://so.csdn.net/so/search?q=Kafka&spm=1001.2101.3001.7020\">Kafka</a>常用命令及可能遇到的问题：</p>\n<ol>\n<li>启动Kafka代理服务器</li>\n</ol>\n<p>命令：bin&#x2F;kafka-server-start.sh config&#x2F;server.properties</p>\n<p>问题：无法启动，可能是因为配置文件中存在错误或者某些参数未正确指定。</p>\n<ol start=\"2\">\n<li>停止Kafka代理服务器</li>\n</ol>\n<p>命令：bin&#x2F;kafka-server-stop.sh</p>\n<p>问题：无法停止，可能是因为代理正在执行某些操作或者存在其他未知问题。</p>\n<ol start=\"3\">\n<li>查看Kafka代理服务器状态</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –describe –zookeeper localhost:2181 –topic test</p>\n<p>问题：无法列出主题的详细信息，可能是因为主题不存在，或者ZooKeeper服务未正确启动。</p>\n<ol start=\"4\">\n<li>修改Kafka代理服务器的配置文件(config&#x2F;server.properties)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法修改，可能是因为没有足够的权限或文件不存在。</p>\n<ol start=\"5\">\n<li>删除主题(topic)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –delete –zookeeper localhost:2181 –topic test</p>\n<p>问题：无法删除主题，可能是因为主题不存在，或者ZooKeeper服务未正确启动。</p>\n<ol start=\"6\">\n<li>创建Kafka消费者组(consumer group)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –group my-group</p>\n<p>问题：无法创建消费者组，可能是因为主题不存在，或者Kafka代理不支持在线创建消费者组。</p>\n<ol start=\"7\">\n<li>修改消费者组的名称(group)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-groups.sh –bootstrap-server localhost:9092 –group my-group –new-consumer –reset-offsets –to-earliest –all-topics –execute</p>\n<p>问题：无法修改消费者组名称，可能是因为该组不存在或者Kafka代理不支持在线修改消费者组名称。</p>\n<ol start=\"8\">\n<li>查看当前Kafka生产者(producer)的配置</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –list-properties</p>\n<p>问题：无法列出生产者的配置信息，可能是因为Kafka代理未正确启动或者连接设置错误。</p>\n<ol start=\"9\">\n<li>修改Kafka生产者的轮询时间(interval)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property linger.ms&#x3D;500</p>\n<p>问题：无法修改<a href=\"https://so.csdn.net/so/search?q=%E8%BD%AE%E8%AF%A2&spm=1001.2101.3001.7020\">轮询</a>时间，可能是因为参数设置有误或者Kafka代理不支持在线修改。</p>\n<ol start=\"10\">\n<li>回溯消费</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-groups.sh –bootstrap-server localhost:9092 –group my-group –reset-offsets –to-earliest –execute –topic test</p>\n<p>问题：无法<a href=\"https://so.csdn.net/so/search?q=%E5%9B%9E%E6%BA%AF&spm=1001.2101.3001.7020\">回溯</a>消费，可能是因为消费者组不存在，或者Kafka代理不支持在线回溯消费。</p>\n<ol start=\"11\">\n<li>暂停Kafka的重试机制(retries)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property retries&#x3D;0</p>\n<p>问题：无法暂停重试机制，可能是因为给定的参数有误或者Kafka代理不支持在线修改重试设置。</p>\n<ol start=\"12\">\n<li>设置Kafka生产者的超时时间(timeout)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property delivery.timeout.ms&#x3D;3000</p>\n<p>问题：无法设置超时时间，可能是因为参数设置错误或者Kafka代理不支持在线修改超时时间。</p>\n<ol start=\"13\">\n<li>查看Kafka消费者组的偏移量(offset)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-groups.sh –bootstrap-server localhost:9092 –group my-group –describe</p>\n<p>问题：无法列出偏移量信息，可能是因为给定的消费者组不存在或者Kafka代理未正确启动。</p>\n<ol start=\"14\">\n<li>使用自定义分区(partitioner)发送消息到主题(topic)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –property “partitioner.class&#x3D;com.xyz.CustomPartitioner”</p>\n<p>问题：无法使用自定义分区发送消息，可能是因为指定的类文件不存在或者存在语法错误。</p>\n<ol start=\"15\">\n<li>更改Kafka生产者的批处理大小(batch size)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property batch.size&#x3D;16384</p>\n<p>问题：无法更改批处理大小，可能是因为参数设置有误或者Kafka代理不支持在线修改。</p>\n<ol start=\"16\">\n<li>更改Kafka生产者的缓冲池大小(buffer memory)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property buffer.memory&#x3D;33554432</p>\n<p>问题：无法更改缓冲池大小，可能是因为参数设置错误或者Kafka代理不支持在线修改。</p>\n<ol start=\"17\">\n<li>查看Kafka的日志文件(logs)</li>\n</ol>\n<p>命令：tail -f logs&#x2F;server.log</p>\n<p>问题：无法查看Kafka服务器的日志文件，可能是因为没有足够的权限或者文件不存在。</p>\n<ol start=\"18\">\n<li>修改Kafka的日志级别(log level)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –group my-group –log-level debug</p>\n<p>问题：无法修改日志级别，可能是因为给定的参数有误或者Kafka代理不支持在线修改日志级别。</p>\n<ol start=\"19\">\n<li>查看Kafka生产者的发送速度(rate)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-producer-<a href=\"https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782&utm_source=glcblog&spm=1001.2101.3001.7020\">perf</a>-test.sh –topic test –num-records 1000000 –record-size 1000 –throughput -1 –producer-props bootstrap.servers&#x3D;localhost:9092 buffer.memory&#x3D;33554432 batch.size&#x3D;16384 –print-metrics</p>\n<p>问题：无法计算发送速度，可能是因为参数设置错误或者Kafka代理未正确启动。</p>\n<ol start=\"20\">\n<li>查看Kafka消费者的消费速度(rate)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-perf-test.sh –zookeeper localhost:2181 –messages 100000 –size 1000 –threads 1</p>\n<p>问题：无法计算消费速度，可能是因为参数设置错误或者Kafka代理未正确启动。</p>\n<ol start=\"21\">\n<li>将Kafka主题复制到另一个代理(replication)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –create –zookeeper localhost:2181 –replica-reassignment ‘{“version”:1,“partitions”:[{“topic”:“test”,“partition”:0,“replicas”:[0,1,2]},{“topic”:“test”,“partition”:1,“replicas”:[0,1,2]}]}’</p>\n<p>问题：无法复制主题到其他代理，可能是因为给定的参数有误或者Kafka代理不支持在线复制主题。</p>\n<ol start=\"22\">\n<li>更改Kafka的日志清理策略(log compaction)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –zookeeper localhost:2181 –alter –topic test –config cleanup.policy&#x3D;compact</p>\n<p>问题：无法更改清理策略，可能是因为参数设置错误或者Kafka代理不支持在线修改策略。</p>\n<ol start=\"23\">\n<li>查看Kafka主题的详细信息(topic)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –describe –zookeeper localhost:2181 –topic test</p>\n<p>问题：无法列出主题的详细信息，可能是因为主题不存在或者ZooKeeper服务未正确启动。</p>\n<ol start=\"24\">\n<li>更改Kafka主题的最大消息大小(max message size)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –alter –zookeeper localhost:2181 –topic test –config max.message.bytes&#x3D;1048576</p>\n<p>问题：无法更改最大消息大小，可能是因为参数设置错误或者Kafka代理不支持在线修改。</p>\n<ol start=\"25\">\n<li>修改Kafka生产者的ack机制(acknowledgment)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –producer-property acks&#x3D;all</p>\n<p>问题：无法修改ack机制，可能是因为给定的参数有误或者Kafka代理不支持在线修改。</p>\n<ol start=\"26\">\n<li>从Kafka主题删除消息(delete topic messages)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-delete-records.sh –bootstrap-server localhost:9092 –offset-json-file offsets.json</p>\n<p>问题：无法删除消息，可能是因为给定的参数有误或者Kafka代理不支持在线删除。</p>\n<ol start=\"27\">\n<li>更改Kafka主题的最小ISR(minimum in-sync replicas)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-topics.sh –alter –zookeeper localhost:2181 –topic test –config min.insync.replicas&#x3D;2</p>\n<p>问题：无法更改最小ISR，可能是因为给定的参数有误或者Kafka代理不支持在线修改。</p>\n<ol start=\"28\">\n<li>使用Kafka控制台来发布消息(publish a message using Kafka console)</li>\n</ol>\n<p>命令：echo “hello world” | bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test</p>\n<p>问题：无法发布消息，可能是因为Kafka代理未正确启动或连接设置错误。</p>\n<ol start=\"29\">\n<li>从Kafka主题中消费最新的消息(consume latest messages from Kafka topic)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –from-beginning</p>\n<p>问题：无法消费最新的消息，可能是因为主题不存在或者Kafka代理未正确启动。</p>\n<ol start=\"30\">\n<li>更改Kafka消费者组的偏移重置方式(offset reset)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-groups.sh –bootstrap-server localhost:9092 –group my-group –reset-offsets –to-latest –all-topics –execute</p>\n<p>问题：无法更改偏移重置方式，可能是因为消费者组不存在或者Kafka代理不支持在线修改偏移重置方式。</p>\n<ol start=\"31\">\n<li>将Kafka主题的分区分配给消费者组(assign partitions to a consumer group)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-consumer-groups.sh –bootstrap-server localhost:9092 –group my-group –describe</p>\n<p>问题：无法将主题的分区分配给消费者组，可能是因为消费者组不存在或者Kafka代理未正确启动。</p>\n<ol start=\"32\">\n<li>使用Kafka控制台从Kafka主题中消费消息(consume messages from Kafka topic using console)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test</p>\n<p>问题：无法消费消息，可能是因为主题不存在或者Kafka代理未正确启动。</p>\n<ol start=\"33\">\n<li>修改Kafka性能测试工具的参数(performance tuning for Kafka tool)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-producer-perf-test.sh –topic test –num-records 1000000 –record-size 1000 –throughput -1 –producer-props bootstrap.servers&#x3D;localhost:9092 buffer.memory&#x3D;33554432 batch.size&#x3D;16384 –print-metrics</p>\n<p>问题：无法进行<a href=\"https://edu.csdn.net/cloud/sd_summit?utm_source=glcblog&spm=1001.2101.3001.7020\">性能测试</a>，可能是因为参数设置错误或者Kafka代理未正确启动。</p>\n<ol start=\"34\">\n<li>检查Kafka主题的完整性(check integrity of Kafka topic)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-check-topic.sh –zookeeper localhost:2181 –topic test</p>\n<p>问题：无法检查主题的完整性，可能是因为主题不存在或者ZooKeeper服务未正确启动。</p>\n<ol start=\"35\">\n<li>更改Kafka消费者的轮询时间(poll interval)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –max-poll-interval-ms 5000</p>\n<p>问题：无法更改轮询时间，可能是因为给定的参数有误或者Kafka代理不支持在线修改。</p>\n<ol start=\"36\">\n<li>从Kafka主题中消费消息的同时保存到本地文件(consume messages from Kafka topic and save to local file)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –from-beginning &gt; output.txt</p>\n<p>问题：无法将消息保存到本地文件，可能是因为权限不足或者Kafka代理未正确启动。</p>\n<ol start=\"37\">\n<li>更改Kafka代理的IP地址和端口号(change IP address and port number of Kafka broker)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法修改IP地址和端口号，可能是因为参数设置错误或者Kafka代理未正确启动。</p>\n<ol start=\"38\">\n<li>将Kafka主题转发到另一个Kafka代理转发(forward Kafka topic to another Kafka broker)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-reassign-partitions.sh –zookeeper localhost:2181 –reassignment-json-file reassignment.json –execute</p>\n<p>问题：无法转发主题，可能是因为参数设置错误或者Kafka代理未正确启动。</p>\n<ol start=\"39\">\n<li>启用Kafka安全协议(SSL&#x2F;TLS)(enable SSL&#x2F;TLS for Kafka)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法启用安全协议，可能是因为某些参数设置错误或者证书未正确配置。</p>\n<ol start=\"40\">\n<li>启用Kafka授权机制(authorization)(enable authorization for Kafka)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法启用授权机制，可能是因为某些参数设置错误或者授权配置文件未正确配置。</p>\n<ol start=\"41\">\n<li>启用Kafka认证机制(authentication)(enable authentication for Kafka)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法启用认证机制，可能是因为某些参数设置错误或者身份验证配置不正确。</p>\n<ol start=\"42\">\n<li>更改Kafka代理的内存大小(change memory size of Kafka broker)</li>\n</ol>\n<p>命令：vi config&#x2F;server.properties</p>\n<p>问题：无法更改内存大小，可能是因为给定的参数有误或者Kafka代理未正确启动。</p>\n<ol start=\"43\">\n<li>将Kafka主题的数据备份到其他服务器(backup data of Kafka topic to another server)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-replica-verification.sh –zookeeper localhost:2181 –broker-list localhost:9092 –topic test</p>\n<p>问题：无法备份数据，可能是因为参数设置错误或者ZooKeeper服务未正确启动。</p>\n<ol start=\"44\">\n<li>使用Kafka控制台将消息发送到特定的分区(send messages to specific partition using Kafka console)</li>\n</ol>\n<p>命令：echo “hello world” | bin&#x2F;kafka-console-producer.sh –broker-list localhost:9092 –topic test –property “parse.key&#x3D;true” –property “key.separator&#x3D;:”</p>\n<p>问题：无法发送消息到特定的分区，可能是因为参数设置有误或者Kafka代理未正确启动。</p>\n<ol start=\"45\">\n<li>设置Kafka消费者的最大记录数(max records for Kafka consumer)</li>\n</ol>\n<p>命令：bin&#x2F;kafka-console-consumer.sh –bootstrap-server localhost:9092 –topic test –max-messages 10</p>\n","text":"Kafka常用命令及遇到的问题Kafka常用命令及可能遇到的问题： 启动Kafka代理服务器 命令：bin/kafka-server-start.sh conf...","permalink":"/post/MIDDLEWARE/Kafka常用命令及遇到的问题","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"Kafka","slug":"Kafka","count":1,"path":"api/categories/Kafka.json"},{"name":"MIDDLEWARE","slug":"Kafka/MIDDLEWARE","count":1,"path":"api/categories/Kafka/MIDDLEWARE.json"}],"tags":[{"name":"topic","slug":"topic","count":2,"path":"api/tags/topic.json"},{"name":"命令","slug":"命令","count":1,"path":"api/tags/命令.json"},{"name":"问题","slug":"问题","count":1,"path":"api/tags/问题.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Kafka%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">Kafka常用命令及遇到的问题</span></a></li></ol>","author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"清除信号量队列导致zabbix自动关闭","uid":"262f61f15e8ffbc737e54526fd907a92","slug":"MIDDLEWARE/清除信号量队列导致zabbix自动关闭","date":"2025-04-24T11:26:42.000Z","updated":"2025-09-30T03:26:54.561Z","comments":true,"path":"api/articles/MIDDLEWARE/清除信号量队列导致zabbix自动关闭.json","keywords":"XuGuangSheng","cover":"/covers/zabbix.jpg","text":"清除信号量队列导致zabbix自动关闭前几天在海外UCloud机器上部署了一套zabbix proxy和zabbix agentd，可是第二天一大早就收到邮件说...","permalink":"/post/MIDDLEWARE/清除信号量队列导致zabbix自动关闭","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"zabbix","slug":"zabbix","count":1,"path":"api/categories/zabbix.json"},{"name":"MIDDLEWARE","slug":"zabbix/MIDDLEWARE","count":1,"path":"api/categories/zabbix/MIDDLEWARE.json"}],"tags":[{"name":"proxy","slug":"proxy","count":1,"path":"api/tags/proxy.json"},{"name":"file","slug":"file","count":1,"path":"api/tags/file.json"},{"name":"line","slug":"line","count":1,"path":"api/tags/line.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"在 Kubernetes 集群上安装 KubeVirt","uid":"5a79b62bd0cc256cbc198b2e3cc42ba4","slug":"OCI/在 Kubernetes 集群上安装 KubeVirt","date":"2024-10-25T15:18:17.000Z","updated":"2025-09-30T03:27:00.439Z","comments":true,"path":"api/articles/OCI/在 Kubernetes 集群上安装 KubeVirt.json","keywords":"XuGuangSheng","cover":"/covers/kubernetes-kubevirt.jpg","text":"在 Kubernetes 集群上安装 KubeVirt安装 KubeVirt 并创建虚拟机可以按照以下步骤进行。 安装 KubeVirt 安装 KubeVirt...","permalink":"/post/OCI/在 Kubernetes 集群上安装 KubeVirt","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"KubeVirt","slug":"KubeVirt","count":1,"path":"api/categories/KubeVirt.json"},{"name":"OCI","slug":"KubeVirt/OCI","count":1,"path":"api/categories/KubeVirt/OCI.json"}],"tags":[{"name":"安装","slug":"安装","count":1,"path":"api/tags/安装.json"},{"name":"virtctl","slug":"virtctl","count":1,"path":"api/tags/virtctl.json"},{"name":"Operator","slug":"Operator","count":1,"path":"api/tags/Operator.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}