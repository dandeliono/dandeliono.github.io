{"title":"一行js代码识别Selenium+Webdriver与反识别","uid":"a53c723ef12f17b502c1ffd648c4aabe","slug":"WORK/一行js代码识别Selenium+Webdriver与反识别","date":"2023-01-10T16:14:41.000Z","updated":"2025-12-05T01:48:07.841Z","comments":true,"path":"api/articles/WORK/一行js代码识别Selenium+Webdriver与反识别.json","keywords":"XuGuangSheng","cover":"/covers/jsselenium-webdriver.jpg","content":"<h1 id=\"一行js代码识别Selenium-Webdriver与反识别\"><a href=\"#一行js代码识别Selenium-Webdriver与反识别\" class=\"headerlink\" title=\"一行js代码识别Selenium+Webdriver与反识别\"></a>一行js代码识别Selenium+Webdriver与反识别</h1><h2 id=\"一行js代码识别Selenium-Webdriver\"><a href=\"#一行js代码识别Selenium-Webdriver\" class=\"headerlink\" title=\"一行js代码识别Selenium+Webdriver\"></a>一行js代码识别<a href=\"https://so.csdn.net/so/search?q=Selenium&spm=1001.2101.3001.7020\">Selenium</a>+Webdriver</h2><p>有不少朋友在开发爬虫的过程中喜欢使用Selenium + Chromedriver，以为这样就能做到不被网站的反爬虫机制发现。</p>\n<p>先不说淘宝这种基于用户行为的反爬虫策略，仅仅是一个普通的小网站，使用一行Javascript代码，就能轻轻松松识别你是否使用了Selenium + Chromedriver模拟浏览器。</p>\n<p>我们来看一个例子，使用下面这一段代码启动Chrome窗口：</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from selenium.webdriver import Chrome</span><br><span class=\"line\"><span class=\"attribute\">driver</span> <span class=\"operator\">=</span> Chrome()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>现在，在这个窗口中打开开发者工具，并定位到Console选项卡，如下图所示。</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/fe1bb01b-3309-4de6-aea2-3c9e280eb36a.jpeg?raw=true\"></p>\n<p>现在，在这个窗口输入如下的js代码并按下回车键：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window<span class=\"selector-class\">.navigator</span><span class=\"selector-class\">.webdriver</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>可以看到，开发者工具返回了<code>true</code>。如下图所示。</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/388d5e2a-3a73-47ef-9d78-72a7457c8c8e.jpeg?raw=true\"></p>\n<p>但是，如果你打开一个普通的Chrome窗口，执行相同的命令，可以发现这行代码的返回值为<code>undefined</code>，如下图所示。</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/96c72a47-be9b-47e3-9d68-83b7f7e904c7.jpeg?raw=true\"></p>\n<p>所以，如果网站通过js代码获取这个参数，返回值为<code>undefined</code>说明是正常的浏览器，返回<code>true</code>说明用的是Selenium模拟浏览器。一抓一个准。这里给出一个检测Selenium的js代码例子：</p>\n<figure class=\"highlight arcade\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webdriver = window.navigator.webdriver;</span><br><span class=\"line\"><span class=\"keyword\">if</span>(webdriver)&#123;    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.<span class=\"built_in\">log</span>(<span class=\"string\">&#x27;你这个傻逼你以为使用Selenium模拟浏览器就可以了？&#x27;</span>)</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;    </span><br><span class=\"line\"><span class=\"built_in\">console</span>.<span class=\"built_in\">log</span>(<span class=\"string\">&#x27;正常浏览器&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>网站只要在页面加载的时候运行这个js代码，就可以识别访问者是不是用的Selenium模拟浏览器。如果是，就禁止访问或者触发其他反爬虫的机制。</p>\n<p>那么对于这种情况，在爬虫开发的过程中如何防止这个参数告诉网站你在模拟浏览器呢？</p>\n<p>可能有一些会js的朋友觉得可以通过覆盖这个参数从而隐藏自己，但实际上这个值是不能被覆盖的：</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/32a4d5cc-1175-4577-b8cf-f51110f2a1f9.jpeg?raw=true\"></p>\n<p>对js更精通的朋友，可能会使用下面这一段代码来实现：</p>\n<figure class=\"highlight coffeescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperties(navigator, &#123;webdriver:&#123;get:<span class=\"function\"><span class=\"params\">()</span>=&gt;</span><span class=\"literal\">undefined</span>&#125;&#125;);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> js = <span class=\"string\">r&quot;Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;get: () =&gt; undefined,&#125;);&quot;</span>                           </span><br><span class=\"line\">self.driver.execute_script(js)   </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>运行效果如下图所示：</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/c403fa40-e2a8-4fd1-b302-939f51dfc39f.jpeg?raw=true\"></p>\n<p>确实修改成功了。这种写法就万无一失了吗？并不是这样的，如果此时你在模拟浏览器中通过点击链接、输入网址进入另一个页面，或者开启新的窗口，你会发现，<code>window.navigator.webdriver</code>又变成了<code>true</code>。如下图所示。</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/e6b87b12-da06-479a-b355-778585517d94.jpeg?raw=true\"></p>\n<p>那么是不是可以在每一个页面都打开以后，再次通过<a href=\"https://so.csdn.net/so/search?q=webdriver&spm=1001.2101.3001.7020\">webdriver</a>执行上面的js代码，从而实现在每个页面都把<code>window.navigator.webdriver</code>设置为<code>undefined</code>呢？也不行。</p>\n<p>因为当你执行：<code>driver.get(网址)</code>的时候，浏览器会打开网站，加载页面并运行网站自带的js代码。所以在你重设<code>window.navigator.webdriver</code>之前，实际上网站早就已经知道你是模拟浏览器了。</p>\n<p>接下来，又有朋友提出，可以通过编写Chrome插件来解决这个问题，让插件里面的js代码在网站自带的所有js代码之前执行。</p>\n<p>这样做当然可以，不过有更简单的办法，只需要设置Chromedriver的启动参数即可解决问题。</p>\n<p>在启动Chromedriver之前，为Chrome开启实验性功能参数<code>excludeSwitches</code>，它的值为<code>[&#39;enable-automation&#39;]</code>，完整代码如下：</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver <span class=\"keyword\">import</span> Chrome</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver <span class=\"keyword\">import</span> ChromeOptions </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">option</span> = ChromeOptions()</span><br><span class=\"line\">#开发者模式</span><br><span class=\"line\"><span class=\"keyword\">option</span>.add_experimental_option(<span class=\"string\">&#x27;excludeSwitches&#x27;</span>, [<span class=\"string\">&#x27;enable-automation&#x27;</span>])</span><br><span class=\"line\">driver = Chrome(<span class=\"keyword\">options</span>=<span class=\"keyword\">option</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>此时启动的Chrome窗口，在右上角会弹出一个提示，不用管它，不要点击<code>停用</code>按钮。</p>\n<p>再次在开发者工具的Console选项卡中查询<code>window.navigator.webdriver</code>，可以发现这个值已经自动变成<code>undefined</code>了。并且无论你打开新的网页，开启新的窗口还是点击链接进入其他页面，都不会让它变成<code>true</code>。运行效果如下图所示。</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/2606b1ce-6232-4bd6-98ca-43952f690e01.jpeg?raw=true\"></p>\n<p>截至2019年02月12日20:46分，本文所讲的方法可以用来登录知乎。如果使用 Selenium 直接登录知乎，会弹出验证码；先使用本文的方法再登录知乎，能够成功伪装成真实的浏览器，不会弹出验证码。</p>\n<p>实际上，Selenium + Webdriver能被识别的特征不止这一个。</p>\n<p>然而时过境迁，随着 Chrome 版本升级，这一方法也宣告失效。</p>\n<h2 id=\"如何正确移除Selenium中的-window-navigator-webdriver（最新版）\"><a href=\"#如何正确移除Selenium中的-window-navigator-webdriver（最新版）\" class=\"headerlink\" title=\"如何正确移除Selenium中的 window.navigator.webdriver（最新版）\"></a>如何正确移除Selenium中的 window.navigator.webdriver（最新版）</h2><p>我们今天的方法非常简单。就是使用 Google 的<code>Chrome Devtools-Protocol（Chrome 开发工具协议）</code>简称<code>CDP</code>。</p>\n<p>我们打开 CPD 的官方文档[1]，可以看到如下的命令：</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/d13cbcae-01a8-4baf-8c2a-8785f5692838.png?raw=true\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>在每个Frame 刚刚打开，还没有运行 Frame 的脚本前，运行给定的脚本。</p></blockquote>\n<p>通过这个命令，我们可以给定一段 JavaScript 代码，让 Chrome 刚刚打开每一个页面，还没有运行网站自带的 JavaScript 代码时，就先执行我们给定的这段代码。</p>\n<p>那么如何在 Selenium 中调用 CDP 的命令呢？实际上非常简单，我们使用<code>driver.execute_cdp_cmd</code>。根据 Selenium 的官方文档[2]，传入需要调用的 CDP 命令和参数即可：</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/a5012809-d86f-435e-a4d9-c8e97739b446.png?raw=true\"></p>\n<p>于是我们可以写出如下代码：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver <span class=\"keyword\">import</span> Chrome</span><br><span class=\"line\"></span><br><span class=\"line\">driver = Chrome(<span class=\"string\">&#x27;./chromedriver&#x27;</span>)</span><br><span class=\"line\">driver.execute_cdp_cmd(<span class=\"string\">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;source&quot;</span>: <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;</span></span><br><span class=\"line\"><span class=\"string\">      get: () =&gt; undefined</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &quot;&quot;&quot;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">driver.get(<span class=\"string\">&#x27;http://exercise.kingname.info&#x27;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>运行效果如下图所示：<br><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/40076e72-fb66-4a7a-a356-5dc9055256ec.jpeg?raw=true\"></p>\n<p>完美隐藏<code>window.navigator.webdriver</code>。并且，关键语句：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">driver.execute_cdp_cmd(<span class=\"string\">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;source&quot;</span>: <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;</span></span><br><span class=\"line\"><span class=\"string\">      get: () =&gt; undefined</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &quot;&quot;&quot;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>只需要执行一次，之后只要你不关闭这个<code>driver</code>开启的窗口，无论你打开多少个网址，他都会自动提前在网站自带的所有 js 之前执行这个语句，隐藏<code>window.navigator.webdriver</code>。</p>\n<p>如果有人运行上面的代码，出现如下报错：</p>\n<p><img src=\"https://github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/a78542b1-cc75-473e-90d0-77a0626ad322.png?raw=true\"></p>\n<p>那么请升级你的 ChromeDriver。老版本的 Chrome + ChromeDriver 只能用以前的方法，不能用今天的方法。新版本的 Chrome + ChromeDriver 可以使用今天的方法，但不能用老方法。正应了那句话：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>上帝给你关上一扇门的时候，悄悄为你开了一扇窗。</p></blockquote>\n<p>虽然使用以上代码就可以达到目的了，不过为了实现更好的隐藏效果，大家也可以继续加入两个实验选项：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\">options = webdriver.ChromeOptions()</span><br><span class=\"line\">options.add_experimental_option(<span class=\"string\">&quot;excludeSwitches&quot;</span>, [<span class=\"string\">&quot;enable-automation&quot;</span>])</span><br><span class=\"line\">options.add_experimental_option(<span class=\"string\">&#x27;useAutomationExtension&#x27;</span>, <span class=\"literal\">False</span>)</span><br><span class=\"line\">driver = webdriver.Chrome(options=options, executable_path=<span class=\"string\">&#x27;./chromedriver&#x27;</span>)</span><br><span class=\"line\">driver.execute_cdp_cmd(<span class=\"string\">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;source&quot;</span>: <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;</span></span><br><span class=\"line\"><span class=\"string\">      get: () =&gt; undefined</span></span><br><span class=\"line\"><span class=\"string\">    &#125;)</span></span><br><span class=\"line\"><span class=\"string\">  &quot;&quot;&quot;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">driver.get(<span class=\"string\">&#x27;http://exercise.kingname.info&#x27;</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"附一些网站检测selenium的示例\"><a href=\"#附一些网站检测selenium的示例\" class=\"headerlink\" title=\"附一些网站检测selenium的示例\"></a>附一些网站检测selenium的示例</h2><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`runBotDetection = function () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> documentDetectionKeys = [</span><br><span class=\"line\">        <span class=\"string\">&quot;__webdriver_evaluate&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__selenium_evaluate&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__webdriver_script_function&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__webdriver_script_func&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__webdriver_script_fn&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__fxdriver_evaluate&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__driver_unwrapped&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__webdriver_unwrapped&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__driver_evaluate&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__selenium_unwrapped&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__fxdriver_unwrapped&quot;</span>,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> windowDetectionKeys = [</span><br><span class=\"line\">        <span class=\"string\">&quot;_phantom&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;__nightmare&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_selenium&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;callPhantom&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;callSelenium&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;_Selenium_IDE_Recorder&quot;</span>,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> windowDetectionKey <span class=\"keyword\">in</span> windowDetectionKeys) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> windowDetectionKeyValue = windowDetectionKeys[windowDetectionKey];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[windowDetectionKeyValue]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> documentDetectionKey <span class=\"keyword\">in</span> documentDetectionKeys) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> documentDetectionKeyValue = documentDetectionKeys[documentDetectionKey];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[&#x27;document&#x27;][documentDetectionKeyValue]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> documentKey <span class=\"keyword\">in</span> <span class=\"keyword\">window</span>[&#x27;document&#x27;]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (documentKey.<span class=\"built_in\">match</span>(/\\$[a-z]dc_/) &amp;&amp; <span class=\"keyword\">window</span>[&#x27;document&#x27;][documentKey][&#x27;cache_&#x27;]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> true;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[&#x27;external&#x27;] &amp;&amp; <span class=\"keyword\">window</span>[&#x27;external&#x27;].<span class=\"keyword\">toString</span>() &amp;&amp; (<span class=\"keyword\">window</span>[&#x27;external&#x27;].<span class=\"keyword\">toString</span>()[&#x27;indexOf&#x27;](&#x27;Sequentum&#x27;) != -1)) <span class=\"keyword\">return</span> true;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[&#x27;document&#x27;][&#x27;documentElement&#x27;][&#x27;getAttribute&#x27;](&#x27;selenium&#x27;)) <span class=\"keyword\">return</span> true;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[&#x27;document&#x27;][&#x27;documentElement&#x27;][&#x27;getAttribute&#x27;](&#x27;webdriver&#x27;)) <span class=\"keyword\">return</span> true;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">window</span>[&#x27;document&#x27;][&#x27;documentElement&#x27;][&#x27;getAttribute&#x27;](&#x27;driver&#x27;)) <span class=\"keyword\">return</span> true;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> false;</span><br><span class=\"line\">&#125;;` </span><br><span class=\"line\"></span><br><span class=\"line\">![](https:<span class=\"comment\">//github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/c1217365-ed69-4933-a9cd-e508e6fe6c45.png?raw=true)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">*   1</span></span><br><span class=\"line\"><span class=\"comment\">*   2</span></span><br><span class=\"line\"><span class=\"comment\">*   3</span></span><br><span class=\"line\"><span class=\"comment\">*   4</span></span><br><span class=\"line\"><span class=\"comment\">*   5</span></span><br><span class=\"line\"><span class=\"comment\">*   6</span></span><br><span class=\"line\"><span class=\"comment\">*   7</span></span><br><span class=\"line\"><span class=\"comment\">*   8</span></span><br><span class=\"line\"><span class=\"comment\">*   9</span></span><br><span class=\"line\"><span class=\"comment\">*   10</span></span><br><span class=\"line\"><span class=\"comment\">*   11</span></span><br><span class=\"line\"><span class=\"comment\">*   12</span></span><br><span class=\"line\"><span class=\"comment\">*   13</span></span><br><span class=\"line\"><span class=\"comment\">*   14</span></span><br><span class=\"line\"><span class=\"comment\">*   15</span></span><br><span class=\"line\"><span class=\"comment\">*   16</span></span><br><span class=\"line\"><span class=\"comment\">*   17</span></span><br><span class=\"line\"><span class=\"comment\">*   18</span></span><br><span class=\"line\"><span class=\"comment\">*   19</span></span><br><span class=\"line\"><span class=\"comment\">*   20</span></span><br><span class=\"line\"><span class=\"comment\">*   21</span></span><br><span class=\"line\"><span class=\"comment\">*   22</span></span><br><span class=\"line\"><span class=\"comment\">*   23</span></span><br><span class=\"line\"><span class=\"comment\">*   24</span></span><br><span class=\"line\"><span class=\"comment\">*   25</span></span><br><span class=\"line\"><span class=\"comment\">*   26</span></span><br><span class=\"line\"><span class=\"comment\">*   27</span></span><br><span class=\"line\"><span class=\"comment\">*   28</span></span><br><span class=\"line\"><span class=\"comment\">*   29</span></span><br><span class=\"line\"><span class=\"comment\">*   30</span></span><br><span class=\"line\"><span class=\"comment\">*   31</span></span><br><span class=\"line\"><span class=\"comment\">*   32</span></span><br><span class=\"line\"><span class=\"comment\">*   33</span></span><br><span class=\"line\"><span class=\"comment\">*   34</span></span><br><span class=\"line\"><span class=\"comment\">*   35</span></span><br><span class=\"line\"><span class=\"comment\">*   36</span></span><br><span class=\"line\"><span class=\"comment\">*   37</span></span><br><span class=\"line\"><span class=\"comment\">*   38</span></span><br><span class=\"line\"><span class=\"comment\">*   39</span></span><br><span class=\"line\"><span class=\"comment\">*   40</span></span><br><span class=\"line\"><span class=\"comment\">*   41</span></span><br><span class=\"line\"><span class=\"comment\">*   42</span></span><br><span class=\"line\"><span class=\"comment\">*   43</span></span><br><span class=\"line\"><span class=\"comment\">*   44</span></span><br><span class=\"line\"><span class=\"comment\">*   45</span></span><br><span class=\"line\"><span class=\"comment\">*   46</span></span><br><span class=\"line\"><span class=\"comment\">*   47</span></span><br><span class=\"line\"><span class=\"comment\">*   48</span></span><br><span class=\"line\"><span class=\"comment\">*   49</span></span><br><span class=\"line\"><span class=\"comment\">*   50</span></span><br><span class=\"line\"><span class=\"comment\">*   51</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.<span class=\"built_in\">document</span>.documentElement.getAttribute(<span class=\"string\">&quot;webdriver&quot;</span>)) <span class=\"keyword\">return</span> !+[]</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (IDLMrxxel) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"string\">&quot;_Selenium_IDE_Recorder&quot;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">window</span>) <span class=\"keyword\">return</span> !+<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (KknKsUayS) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">if</span> (<span class=\"string\">&quot;__webdriver_script_fn&quot;</span> <span class=\"keyword\">in</span> <span class=\"built_in\">document</span>) <span class=\"keyword\">return</span> !+<span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>改写特征参数的js</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">``<span class=\"comment\">// 改写 `languages` </span></span><br><span class=\"line\">Object.defineProperty(navigator, <span class=\"string\">&quot;languages&quot;</span>, &#123;</span><br><span class=\"line\">  get: function() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"string\">&quot;en&quot;</span>, <span class=\"string\">&quot;es&quot;</span>];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//改写 `plugins`</span></span><br><span class=\"line\">Object.defineProperty(navigator, <span class=\"string\">&quot;plugins&quot;</span>, &#123;</span><br><span class=\"line\">  get: () =&gt; new Array(Math.<span class=\"built_in\">floor</span>(Math.random() * 6) + 1),</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 改写`webdriver`</span></span><br><span class=\"line\">Object.defineProperty(navigator, <span class=\"string\">&quot;webdriver&quot;</span>, &#123;</span><br><span class=\"line\">  get: () =&gt; false,</span><br><span class=\"line\">&#125;);`` </span><br><span class=\"line\"></span><br><span class=\"line\">![](https:<span class=\"comment\">//github.com/dandeliono/note/blob/main/source/_posts/resources/img/2023-1-10%2016-10-50/f925f9cf-8163-47d9-a06a-de7237a04a84.png?raw=true)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">*   1</span></span><br><span class=\"line\"><span class=\"comment\">*   2</span></span><br><span class=\"line\"><span class=\"comment\">*   3</span></span><br><span class=\"line\"><span class=\"comment\">*   4</span></span><br><span class=\"line\"><span class=\"comment\">*   5</span></span><br><span class=\"line\"><span class=\"comment\">*   6</span></span><br><span class=\"line\"><span class=\"comment\">*   7</span></span><br><span class=\"line\"><span class=\"comment\">*   8</span></span><br><span class=\"line\"><span class=\"comment\">*   9</span></span><br><span class=\"line\"><span class=\"comment\">*   10</span></span><br><span class=\"line\"><span class=\"comment\">*   11</span></span><br><span class=\"line\"><span class=\"comment\">*   12</span></span><br><span class=\"line\"><span class=\"comment\">*   13</span></span><br><span class=\"line\"><span class=\"comment\">*   14</span></span><br><span class=\"line\"><span class=\"comment\">*   15</span></span><br><span class=\"line\"><span class=\"comment\">*   16</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"driver-execute-script\"><a href=\"#driver-execute-script\" class=\"headerlink\" title=\"driver.execute_script\"></a>driver.execute_script</h2><ul>\n<li>执行单行javascript代码。例：已知‘id’，向表格里注入用户名</li>\n</ul>\n<figure class=\"highlight csp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">driver.execute_script(&quot;document.getElementById(<span class=\"string\">&#x27;id&#x27;</span>).value=<span class=\"string\">&#x27;用户名&#x27;</span>;&quot;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>执行多行javascript代码。例：用javascript注入js文件</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">javacriptCode = <span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">var scriptElt = document.createElement(&#x27;script&#x27;);</span></span><br><span class=\"line\"><span class=\"string\">scriptElt.type = &#x27;text/javascript&#x27;;</span></span><br><span class=\"line\"><span class=\"string\">scriptElt.src = jsFile;</span></span><br><span class=\"line\"><span class=\"string\">document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(scriptElt);</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">try</span></span><br><span class=\"line\">    driver.execute_script(javacriptCode)</span><br><span class=\"line\"><span class=\"keyword\">except</span>:</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>为什么使用Try &#x2F; Except 语句？<br>执行javascript代码时很多情况python会报错，但往往代码却可以被正确的执行。加上Try &#x2F; Except来保护程序的执行。</p>\n<ul>\n<li>根据坐标，命令selenium点击特定位置。有的时候很难定位一个位置，我们可以用坐标这样的绝对位置来定位</li>\n</ul>\n<figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">#例如点击屏幕上 （271</span>，<span class=\"number\">100</span>）这个位置</span><br><span class=\"line\">driver.execute_script<span class=\"comment\">(&quot;document.elementFromPoint(271, 100)</span>.click<span class=\"comment\">()</span>;<span class=\"string\">&quot;)</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h2><p>[1]CPD 的官方文档: <a href=\"https://chromedevtools.github.io/devtools-protocol/tot/Page#method-addScriptToEvaluateOnNewDocument\">https://chromedevtools.github.io/devtools-protocol/tot/Page#method-addScriptToEvaluateOnNewDocument</a><br>[2]官方文档: <a href=\"https://www.selenium.dev/selenium/docs/api/py/webdriver/_chrome/selenium.webdriver.chrome.webdriver.html#selenium.webdriver.chrome.webdriver.WebDriver.execute\\_cdp_cmd\">https://www.selenium.dev/selenium/docs/api/py/webdriver\\_chrome/selenium.webdriver.chrome.webdriver.html#selenium.webdriver.chrome.webdriver.WebDriver.execute\\_cdp_cmd</a></p>\n<p>参考：<a href=\"https://blog.csdn.net/weixin_33816821/article/details/88590077\">https://blog.csdn.net/weixin_33816821/article/details/88590077</a><br><a href=\"https://blog.csdn.net/jiduochou963/article/details/88200217\">https://blog.csdn.net/jiduochou963/article/details/88200217</a><br><a href=\"https://blog.csdn.net/sinat_38682860/article/details/86221844\">https://blog.csdn.net/sinat_38682860/article/details/86221844</a><br><a href=\"https://mp.weixin.qq.com/s/U2aAC6K6RuQDRqfb8m35_w\">https://mp.weixin.qq.com/s/U2aAC6K6RuQDRqfb8m35_w</a></p>\n","text":"一行js代码识别Selenium+Webdriver与反识别一行js代码识别Selenium+Webdriver有不少朋友在开发爬虫的过程中喜欢使用Seleni...","permalink":"/post/WORK/一行js代码识别Selenium+Webdriver与反识别","photos":[],"count_time":{"symbolsCount":"9.6k","symbolsTime":"9 mins."},"categories":[{"name":"https","slug":"https","count":12,"path":"api/categories/https.json"},{"name":"WORK","slug":"https/WORK","count":1,"path":"api/categories/https/WORK.json"}],"tags":[{"name":"true","slug":"true","count":2,"path":"api/tags/true.json"},{"name":"webdriver","slug":"webdriver","count":1,"path":"api/tags/webdriver.json"},{"name":"Selenium","slug":"Selenium","count":1,"path":"api/tags/Selenium.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%80%E8%A1%8Cjs%E4%BB%A3%E7%A0%81%E8%AF%86%E5%88%ABSelenium-Webdriver%E4%B8%8E%E5%8F%8D%E8%AF%86%E5%88%AB\"><span class=\"toc-text\">一行js代码识别Selenium+Webdriver与反识别</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E8%A1%8Cjs%E4%BB%A3%E7%A0%81%E8%AF%86%E5%88%ABSelenium-Webdriver\"><span class=\"toc-text\">一行js代码识别Selenium+Webdriver</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E7%A7%BB%E9%99%A4Selenium%E4%B8%AD%E7%9A%84-window-navigator-webdriver%EF%BC%88%E6%9C%80%E6%96%B0%E7%89%88%EF%BC%89\"><span class=\"toc-text\">如何正确移除Selenium中的 window.navigator.webdriver（最新版）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%99%84%E4%B8%80%E4%BA%9B%E7%BD%91%E7%AB%99%E6%A3%80%E6%B5%8Bselenium%E7%9A%84%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">附一些网站检测selenium的示例</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#driver-execute-script\"><span class=\"toc-text\">driver.execute_script</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\"><span class=\"toc-text\">参考资料</span></a></li></ol></li></ol>","author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"k8s部署springboot的demo项目","uid":"9a9dc15a004def10ae461436e34e9bad","slug":"OCI/k8s部署springboot的demo项目","date":"2023-01-28T02:17:09.000Z","updated":"2025-12-05T01:47:58.375Z","comments":true,"path":"api/articles/OCI/k8s部署springboot的demo项目.json","keywords":"XuGuangSheng","cover":"/covers/k8sspringbootdemo.jpg","text":"k8s部署springboot的demo项目1 准备jar包1.1 把你的springboot项目打包成可执行jar包 1.2 把jar包上传到Linux服务器...","permalink":"/post/OCI/k8s部署springboot的demo项目","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"img","slug":"img","count":1,"path":"api/categories/img.json"},{"name":"OCI","slug":"img/OCI","count":1,"path":"api/categories/img/OCI.json"}],"tags":[{"name":"https","slug":"https","count":44,"path":"api/tags/https.json"},{"name":"blog","slug":"blog","count":3,"path":"api/tags/blog.json"},{"name":"csdnimg","slug":"csdnimg","count":1,"path":"api/tags/csdnimg.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"MAC地址正则匹配","uid":"ae3e49e2fd32f60fd6f14ef67049c415","slug":"ALG/MAC地址正则匹配","date":"2023-01-05T11:59:40.000Z","updated":"2025-12-05T01:46:01.352Z","comments":true,"path":"api/articles/ALG/MAC地址正则匹配.json","keywords":"XuGuangSheng","cover":"/covers/mac.jpg","text":"MAC地址正则匹配关于MAC地址MAC地址，也就是网卡MAC码。网卡MAC码是由IEEE的注册管理机构固定分配的,因此每一个主机会有一个MAC地址，具有全球唯一...","permalink":"/post/ALG/MAC地址正则匹配","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"MAC","slug":"MAC","count":1,"path":"api/categories/MAC.json"},{"name":"ALG","slug":"MAC/ALG","count":1,"path":"api/categories/MAC/ALG.json"}],"tags":[{"name":"匹配的结果例如","slug":"匹配的结果例如","count":1,"path":"api/tags/匹配的结果例如.json"},{"name":"地址","slug":"地址","count":1,"path":"api/tags/地址.json"},{"name":"地址正则匹配","slug":"地址正则匹配","count":1,"path":"api/tags/地址正则匹配.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}