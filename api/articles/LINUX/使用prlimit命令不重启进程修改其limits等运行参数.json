{"title":"使用prlimit命令不重启进程修改其limits等运行参数","uid":"57ca05a26664334bc519d817eff06219","slug":"LINUX/使用prlimit命令不重启进程修改其limits等运行参数","date":"2023-11-29T14:25:53.000Z","updated":"2025-12-05T01:47:13.836Z","comments":true,"path":"api/articles/LINUX/使用prlimit命令不重启进程修改其limits等运行参数.json","keywords":"XuGuangSheng","cover":"/covers/prlimitlimits.jpg","content":"<h1 id=\"使用prlimit命令不重启进程修改其limits等运行参数\"><a href=\"#使用prlimit命令不重启进程修改其limits等运行参数\" class=\"headerlink\" title=\"使用prlimit命令不重启进程修改其limits等运行参数\"></a>使用prlimit命令不重启进程修改其limits等运行参数</h1><figure class=\"highlight tcl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">这里我以MySQL服务为例</span><br><span class=\"line\"></span><br><span class=\"line\">  $ ps auxf | grep -v grep | grep mysqld   </span><br><span class=\"line\">  mysql      <span class=\"number\">1204</span>  <span class=\"number\">1.3</span>  <span class=\"number\">3.4</span> <span class=\"number\">7311604</span> <span class=\"number\">1134388</span> ?     Sl   Aug31  <span class=\"number\">68</span>:<span class=\"number\">40</span> ./bin/mysqld --defaults-<span class=\"keyword\">file</span>=/usr/local/mysql/my.cnf --user=mysql --log-<span class=\"keyword\">error</span>-verbosity=<span class=\"number\">3</span></span><br><span class=\"line\"></span><br><span class=\"line\">  $ cat /<span class=\"keyword\">proc</span>/1204/limits |<span class=\"title\"> grep</span> file   # 看到文件句柄限制为10240了<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> file<span class=\"title\"> size</span> <span class=\"title\">            unlimited</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           bytes</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> core<span class=\"title\"> file</span> size        0<span class=\"title\">                    unlimited</span> <span class=\"title\">           bytes</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> open<span class=\"title\"> files</span>            10240                10240<span class=\"title\">                files</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> file<span class=\"title\"> locks</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           locks</span>     </span><br><span class=\"line\"></span><br><span class=\"line\">  # 用prlimit 搞一下  </span><br><span class=\"line\">  $<span class=\"title\"> prlimit</span> --nofile=65535:65535 --pid 1204</span><br><span class=\"line\"></span><br><span class=\"line\">  $<span class=\"title\"> cat</span> /<span class=\"keyword\">proc</span>/1204/limits |<span class=\"title\"> grep</span> file        # 再次查看，可以看到已经变成 65535了<span class=\"title\">   </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> file<span class=\"title\"> size</span> <span class=\"title\">            unlimited</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           bytes</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> core<span class=\"title\"> file</span> size        0<span class=\"title\">                    unlimited</span> <span class=\"title\">           bytes</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> open<span class=\"title\"> files</span>            65535                65535<span class=\"title\">                files</span> <span class=\"title\">      </span></span><br><span class=\"line\"><span class=\"title\">  Max</span> file<span class=\"title\"> locks</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           unlimited</span> <span class=\"title\">           locks</span> <span class=\"title\">    </span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">prlimit</span> 还支持其它的参数修改，具体如下  </span><br><span class=\"line\">  $<span class=\"title\"> prlimit</span> --help<span class=\"title\">                                              </span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">  Usage:</span> <span class=\"title\"> </span></span><br><span class=\"line\"><span class=\"title\">  prlimit</span> \\[options\\] \\[-p<span class=\"title\"> PID\\]</span> <span class=\"title\"> </span></span><br><span class=\"line\"><span class=\"title\">  prlimit</span> \\[options\\]<span class=\"title\"> COMMAND</span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">  General</span> Options:  </span><br><span class=\"line\">  -p, --pid &lt;pid&gt;<span class=\"title\">        process</span> id  </span><br><span class=\"line\">  -o, --output &lt;list&gt;<span class=\"title\">    define</span> which<span class=\"title\"> output</span> columns<span class=\"title\"> to</span> use  </span><br><span class=\"line\">    --noheadings<span class=\"title\">       don&#x27;t</span> print<span class=\"title\"> headings</span>  </span><br><span class=\"line\">    --raw<span class=\"title\">              use</span> the<span class=\"title\"> raw</span> output<span class=\"title\"> format</span>  </span><br><span class=\"line\">    --verbose<span class=\"title\">          verbose</span> output  </span><br><span class=\"line\">  -h, --help<span class=\"title\">             display</span> this<span class=\"title\"> help</span> and<span class=\"title\"> exit</span>  </span><br><span class=\"line\">  -V, --version<span class=\"title\">          output</span> version<span class=\"title\"> information</span> and<span class=\"title\"> exit</span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">  Resources</span> Options:  </span><br><span class=\"line\">  -c, --core<span class=\"title\">             maximum</span> size<span class=\"title\"> of</span> core<span class=\"title\"> files</span> created  </span><br><span class=\"line\">  -d, --data<span class=\"title\">             maximum</span> size<span class=\"title\"> of</span> a<span class=\"title\"> process&#x27;s</span> data<span class=\"title\"> segment</span>  </span><br><span class=\"line\">  -e, --nice<span class=\"title\">             maximum</span> nice<span class=\"title\"> priority</span> allowed<span class=\"title\"> to</span> raise  </span><br><span class=\"line\">  -f, --fsize<span class=\"title\">            maximum</span> size<span class=\"title\"> of</span> files<span class=\"title\"> written</span> by<span class=\"title\"> the</span> process  </span><br><span class=\"line\">  -i, --sigpending<span class=\"title\">       maximum</span> number<span class=\"title\"> of</span> pending<span class=\"title\"> signals</span>  </span><br><span class=\"line\">  -l, --memlock<span class=\"title\">          maximum</span> size<span class=\"title\"> a</span> process<span class=\"title\"> may</span> lock<span class=\"title\"> into</span> memory  </span><br><span class=\"line\">  -m, --rss<span class=\"title\">              maximum</span> resident<span class=\"title\"> set</span> size  </span><br><span class=\"line\">  -n, --nofile<span class=\"title\">           maximum</span> number<span class=\"title\"> of</span> open<span class=\"title\"> files</span>        # 最常用  </span><br><span class=\"line\">  -q, --msgqueue<span class=\"title\">         maximum</span> bytes<span class=\"title\"> in</span> POSIX<span class=\"title\"> message</span> queues  </span><br><span class=\"line\">  -r, --rtprio<span class=\"title\">           maximum</span> real-time<span class=\"title\"> scheduling</span> priority  </span><br><span class=\"line\">  -s, --stack<span class=\"title\">            maximum</span> stack<span class=\"title\"> size</span>  </span><br><span class=\"line\">  -t, --cpu<span class=\"title\">              maximum</span> amount<span class=\"title\"> of</span> CPU<span class=\"title\"> time</span> in<span class=\"title\"> seconds</span>  </span><br><span class=\"line\">  -u, --nproc<span class=\"title\">            maximum</span> number<span class=\"title\"> of</span> user<span class=\"title\"> processes</span>        # 常用  </span><br><span class=\"line\">  -v, --as<span class=\"title\">               size</span> of<span class=\"title\"> virtual</span> memory  </span><br><span class=\"line\">  -x, --locks<span class=\"title\">            maximum</span> number<span class=\"title\"> of</span> file<span class=\"title\"> locks</span>  </span><br><span class=\"line\">  -y, --rttime<span class=\"title\">           CPU</span> time<span class=\"title\"> in</span> microseconds<span class=\"title\"> a</span> process<span class=\"title\"> scheduled</span> <span class=\"title\"> </span></span><br><span class=\"line\"><span class=\"title\">              under</span> real-time<span class=\"title\"> scheduling</span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">  Available</span> columns (for --output):<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">  DESCRIPTION</span> <span class=\"title\"> resource</span> description<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">    RESOURCE</span> <span class=\"title\"> resource</span> name<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">      SOFT</span> <span class=\"title\"> soft</span> limit<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">      HARD</span> <span class=\"title\"> hard</span> limit (ceiling)<span class=\"title\">  </span></span><br><span class=\"line\"><span class=\"title\">    UNITS</span> <span class=\"title\"> units</span></span><br><span class=\"line\"><span class=\"title\"></span></span><br><span class=\"line\"><span class=\"title\">  For</span> more<span class=\"title\"> details</span> see<span class=\"title\"> prlimit(1).</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","text":"使用prlimit命令不重启进程修改其limits等运行参数12345678910111213141516171819202122232425262728293...","permalink":"/post/LINUX/使用prlimit命令不重启进程修改其limits等运行参数","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[{"name":"使用","slug":"使用","count":2,"path":"api/categories/使用.json"},{"name":"LINUX","slug":"使用/LINUX","count":1,"path":"api/categories/使用/LINUX.json"}],"tags":[{"name":"prlimit","slug":"prlimit","count":1,"path":"api/tags/prlimit.json"},{"name":"命令不重启进程修改其","slug":"命令不重启进程修改其","count":1,"path":"api/tags/命令不重启进程修改其.json"},{"name":"limits","slug":"limits","count":1,"path":"api/tags/limits.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8prlimit%E5%91%BD%E4%BB%A4%E4%B8%8D%E9%87%8D%E5%90%AF%E8%BF%9B%E7%A8%8B%E4%BF%AE%E6%94%B9%E5%85%B6limits%E7%AD%89%E8%BF%90%E8%A1%8C%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">使用prlimit命令不重启进程修改其limits等运行参数</span></a></li></ol>","author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Linux 系统监控工具 atop","uid":"82b3a52976f247e94d00aebe443d97b1","slug":"LINUX/Linux 系统监控工具 atop","date":"2023-12-13T09:25:22.000Z","updated":"2025-12-05T01:47:02.607Z","comments":true,"path":"api/articles/LINUX/Linux 系统监控工具 atop.json","keywords":"XuGuangSheng","cover":"/covers/linux-atop.jpg","text":"Linux 系统监控工具 atop系统监控是运维工作中重要的一环，本文以 atop 工具为例来介绍系统的重要监控项。 atop可以使用yum或apt包管理器进行...","permalink":"/post/LINUX/Linux 系统监控工具 atop","photos":[],"count_time":{"symbolsCount":"4.9k","symbolsTime":"4 mins."},"categories":[{"name":"CPU","slug":"CPU","count":5,"path":"api/categories/CPU.json"},{"name":"LINUX","slug":"CPU/LINUX","count":4,"path":"api/categories/CPU/LINUX.json"}],"tags":[{"name":"https","slug":"https","count":44,"path":"api/tags/https.json"},{"name":"atop","slug":"atop","count":2,"path":"api/tags/atop.json"},{"name":"img","slug":"img","count":1,"path":"api/tags/img.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Elasticsearch 数值类型也能存String 类型问题分析","uid":"e31577451631f8a2adc07bcea9f94111","slug":"MIDDLEWARE/Elasticsearch 数值类型也能存String 类型问题分析","date":"2023-11-22T10:47:50.000Z","updated":"2025-12-05T01:47:25.407Z","comments":true,"path":"api/articles/MIDDLEWARE/Elasticsearch 数值类型也能存String 类型问题分析.json","keywords":"XuGuangSheng","cover":"/covers/elasticsearch-string.jpg","text":"Elasticsearch 数值类型也能存String 类型问题分析最近经常遇到遇到某个客户问数值类型的字段也能存字符串，或者说已经将字段类型设置成了float...","permalink":"/post/MIDDLEWARE/Elasticsearch 数值类型也能存String 类型问题分析","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"https","slug":"https","count":12,"path":"api/categories/https.json"},{"name":"MIDDLEWARE","slug":"https/MIDDLEWARE","count":2,"path":"api/categories/https/MIDDLEWARE.json"}],"tags":[{"name":"com","slug":"com","count":26,"path":"api/tags/com.json"},{"name":"float","slug":"float","count":1,"path":"api/tags/float.json"},{"name":"developer","slug":"developer","count":1,"path":"api/tags/developer.json"}],"author":{"name":"dandeliono","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/29496357","link":"/","description":"永远相信美好的事情即将发生","socials":{"github":"https://github.com/dandeliono","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}